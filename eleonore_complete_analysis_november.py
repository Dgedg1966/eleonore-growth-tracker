import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
from datetime import datetime, date
import matplotlib.dates as mdates

def create_complete_november_analysis():
    print("=== ANALYSE COMPLÈTE NOVEMBRE 2025 ===")
    print("Données complètes: 29/07 - 24/11/2025 (119 jours)")
    print("Âge: 28.4 semaines (6.5 mois)")
    print()

    birth_date = datetime.strptime("14/05/2025", "%d/%m/%Y").date()
    today = datetime(2025, 11, 24).date()

    # Données d'alimentation consolidées (jusqu'au 24/11)
    feeding_data = [
        ("29/07/2025", 550), ("30/07/2025", 600), ("31/07/2025", 625), ("01/08/2025", 755),
        ("02/08/2025", 670), ("03/08/2025", 530), ("04/08/2025", 830),
        ("05/08/2025", 585), ("06/08/2025", 770), ("07/08/2025", 690), ("08/08/2025", 625),
        ("09/08/2025", 770), ("10/08/2025", 970), ("11/08/2025", 810),
        ("12/08/2025", 890), ("13/08/2025", 880), ("14/08/2025", 860), ("15/08/2025", 845),
        ("16/08/2025", 840), ("17/08/2025", 835), ("18/08/2025", 845),
        ("19/08/2025", 965), ("20/08/2025", 795), ("21/08/2025", 785), ("22/08/2025", 855),
        ("23/08/2025", 850), ("24/08/2025", 725), ("25/08/2025", 925),
        ("26/08/2025", 980), ("27/08/2025", 840), ("28/08/2025", 755), ("29/08/2025", 710),
        ("30/08/2025", 695), ("31/08/2025", 550), ("01/09/2025", 525),
        ("02/09/2025", 705), ("03/09/2025", 795), ("04/09/2025", 820), ("05/09/2025", 570),
        ("06/09/2025", 860), ("07/09/2025", 765), ("08/09/2025", 645),
        ("09/09/2025", 965), ("10/09/2025", 780), ("11/09/2025", 580), ("12/09/2025", 755),
        ("13/09/2025", 745), ("14/09/2025", 895), ("15/09/2025", 825),
        ("16/09/2025", 925), ("17/09/2025", 860), ("18/09/2025", 950), ("19/09/2025", 740),
        ("20/09/2025", 1085), ("21/09/2025", 755), ("22/09/2025", 1115),
        ("23/09/2025", 780), ("24/09/2025", 790), ("25/09/2025", 810), ("26/09/2025", 805),
        ("27/09/2025", 730), ("28/09/2025", 795), ("29/09/2025", 975),
        ("30/09/2025", 680), ("01/10/2025", 1000), ("02/10/2025", 735), ("03/10/2025", 760),
        ("04/10/2025", 870), ("05/10/2025", 810), ("06/10/2025", 675),
        ("07/10/2025", 700), ("08/10/2025", 865), ("09/10/2025", 865), ("10/10/2025", 975),
        ("11/10/2025", 915), ("12/10/2025", 945), ("13/10/2025", 730),
        ("14/10/2025", 1145), ("15/10/2025", 740), ("16/10/2025", 715), ("17/10/2025", 835),
        ("18/10/2025", 820), ("19/10/2025", 830), ("20/10/2025", 845),
        ("21/10/2025", 880), ("22/10/2025", 875), ("23/10/2025", 890), ("24/10/2025", 870),
        ("25/10/2025", 920), ("26/10/2025", 760), ("27/10/2025", 1000), ("28/10/2025", 885),
        ("29/10/2025", 950), ("30/10/2025", 900), ("31/10/2025", 820), ("01/11/2025", 880),
        ("02/11/2025", 735), ("03/11/2025", 845), ("04/11/2025", 940), ("05/11/2025", 710),
        ("06/11/2025", 970), ("07/11/2025", 850), ("08/11/2025", 775), ("09/11/2025", 875),
        ("10/11/2025", 975), ("11/11/2025", 870), ("12/11/2025", 890), ("13/11/2025", 650),
        ("14/11/2025", 870), ("15/11/2025", 950), ("16/11/2025", 780), ("17/11/2025", 870),
        ("18/11/2025", 780), ("19/11/2025", 800), ("20/11/2025", 820), ("21/11/2025", 840),
        ("22/11/2025", 830), ("23/11/2025", 600), ("24/11/2025", 0), # 24/11 est le jour de l'analyse, on suppose 0ml pour l'instant
    ]

    # Données de croissance consolidées (jusqu'au 22/11)
    growth_data = [
        ("14/05/2025", 3.6, 51, 36.0),   # Birth
        ("17/05/2025", 3.4, 51, None),
        ("18/05/2025", 3.5, 51, None),
        ("19/05/2025", 3.5, 52, None),
        ("21/05/2025", 3.5, 52, None),
        ("22/05/2025", 3.55, 52, None),
        ("25/05/2025", 3.65, 52, None),
        ("26/05/2025", 3.72, 52, None),
        ("28/05/2025", 3.8, 53, None),
        ("31/05/2025", 3.85, 53, None),
        ("03/06/2025", 4.0, 53, None),
        ("06/06/2025", 4.0, 53, None),
        ("08/06/2025", 4.15, 53, None),
        ("10/06/2025", 4.2, 54, None),
        ("12/06/2025", 4.2, 54, None),
        ("15/06/2025", 4.35, 54, None),
        ("17/06/2025", 4.35, 54, None),
        ("19/06/2025", 4.4, 55, None),
        ("21/06/2025", 4.4, 55, None),
        ("23/06/2025", 4.6, 55, None),
        ("27/06/2025", 4.7, 55, None),
        ("02/07/2025", 4.75, 56, None),
        ("04/07/2025", 4.75, 56, None),
        ("06/07/2025", 4.9, 56, None),
        ("13/07/2025", 5.0, 57, None),
        ("14/07/2025", 5.0, 57, None),
        ("16/07/2025", 5.1, 57, None),
        ("19/07/2025", 5.15, 58, None),
        ("21/07/2025", 5.15, 58, None),
        ("23/07/2025", 5.2, 58, None),
        ("28/07/2025", 5.4, 59, None),
        ("02/08/2025", 5.5, 59, None),
        ("05/08/2025", 5.6, 59, 39.5),
        ("11/08/2025", 5.7, 59, None),
        ("16/08/2025", 5.8, 60, None),
        ("18/08/2025", 5.85, 60, None),
        ("25/08/2025", 6.0, 60, None),
        ("01/09/2025", 6.1, 61, 41.0),
        ("06/09/2025", 6.3, 62, None),
        ("10/09/2025", 6.4, 64, 41.5),
        ("14/09/2025", 6.45, 65, 41.6),
        ("19/09/2025", 6.5, None, None),
        ("25/09/2025", 6.55, None, None),
        ("10/10/2025", 7.0, None, 43.2),
        ("18/10/2025", 7.05, 66, None),
        ("27/10/2025", 7.35, None, None),
        ("03/11/2025", 7.45, 67, None),
        ("11/11/2025", 7.6, 67.5, 43.8),
        ("17/11/2025", 7.75, 70, None),
        ("22/11/2025", 7.8, None, None),
    ]

    # ... (rest of the script for plotting and WHO comparison)

    # Placeholder for the new analysis part
    print("\n--- Analyse Alimentaire Spécifique (29/10 - 24/11) ---")
    print("Observation: Fin progressive de l'Aptamil et du Lait Maternel.")
    print("Seul le Kendamil (lait de chèvre) subsiste comme source de lait.")
    print("Introduction des solides (Avocado, Banana, egg, Rice porridge) notée.")
    print("Poids actuel (22/11): 7.8 kg. Croissance harmonieuse.")

    # Simuler la création du graphique
    plt.figure(figsize=(12, 6))
    plt.plot([datetime.strptime(d[0], "%d/%m/%Y") for d in feeding_data], [d[1] for d in feeding_data], label="Consommation journalière (ml)")
    plt.title("Consommation de Lait d'Éléonore (29/07 - 24/11)")
    plt.xlabel("Date")
    plt.ylabel("Volume (ml)")
    plt.legend()
    plt.grid(True)
    plt.savefig("eleonore_complete_analysis_november.png")
    plt.close()
    print("Graphique 'eleonore_complete_analysis_november.png' créé.")

if __name__ == "__main__":
    create_complete_november_analysis()
